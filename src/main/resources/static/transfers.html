<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ä—ã–±—ã</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/dashboard.html">–§–µ—Ä–º–∞</a>
        <div class="d-flex ms-auto">
            <button id="logoutBtn" class="btn btn-light btn-sm">–í—ã–π—Ç–∏</button>
        </div>
    </div>
</nav>

<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2>–£—á—ë—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π</h2>
        <button id="createTransferBtn" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#transferModal"
                onclick="openCreateTransferModal()">–ù–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
        </button>
    </div>

    <div class="list-group" id="transferContainer"></div>
</div>

<template id="transferTemplate">
    <div class="list-group-item">
        <div class="d-flex justify-content-between">
            <div>
                <div><strong>–î–∞—Ç–∞:</strong> <span class="transfer-date"></span></div>
                <div><strong>–ò–∑:</strong> <span class="transfer-from"></span></div>
                <div><strong>–í:</strong> <span class="transfer-to"></span></div>
                <div><strong>–ü–∞—Ä—Ç–∏—è:</strong> <span class="transfer-batch"></span></div>
                <div><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> <span class="transfer-count"></span> —à—Ç.</div>
                <div><strong>–û–ø–µ—Ä–∞—Ç–æ—Ä:</strong> <span class="transfer-user"></span></div>
            </div>
            <div class="transfer-actions mt-2 d-none">
                <button class="btn btn-sm btn-outline-secondary me-2" onclick="editTransfer(this)">‚úèÔ∏è</button>
                <button class="btn btn-sm btn-outline-danger" onclick="deleteTransfer(this)">üóëÔ∏è</button>
            </div>
        </div>
        <div class="transfer-id d-none"></div>
    </div>
</template>

<div class="modal fade" id="transferModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form id="transferForm">
                <div class="modal-header">
                    <h5 class="modal-title" id="transferModalLabel">–ù–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="transferId">
                    <div class="mb-3">
                        <label for="transferDate" class="form-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                        <input type="datetime-local" id="transferDate" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label for="fromTank" class="form-label">–ò–∑ –±–∞—Å—Å–µ–π–Ω–∞</label>
                        <select id="fromTank" class="form-select" required>
                            <option value="">-- –ù–µ –≤—ã–±—Ä–∞–Ω–æ --</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="toTank" class="form-label">–í –±–∞—Å—Å–µ–π–Ω</label>
                        <select id="toTank" class="form-select" required>
                            <option value="">-- –ù–µ –≤—ã–±—Ä–∞–Ω–æ --</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="transferBatchSelect" class="form-label">–ü–∞—Ä—Ç–∏—è</label>
                        <select id="transferBatchSelect" class="form-select" required>
                            <option value="">-- –ù–µ –≤—ã–±—Ä–∞–Ω–æ --</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="transferCount" class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                        <input type="number" id="transferCount" class="form-control" required min="1">
                    </div>
                    <div class="mb-3">
                        <label for="transferUserSelect" class="form-label">–û–ø–µ—Ä–∞—Ç–æ—Ä</label>
                        <select id="transferUserSelect" class="form-select" required>
                            <option value="">-- –ù–µ –≤—ã–±—Ä–∞–Ω–æ --</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="js/auth.js"></script>
<script src="js/util.js"></script>
<script src="js/transfers.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
