<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–¥–∞—á–∏ - –§–æ—Ä–µ–ª–µ–≤–∞—è —Ñ–µ—Ä–º–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/dashboard.html">–§–µ—Ä–º–∞</a>
        <div class="d-flex ms-auto">
            <button id="logoutBtn" class="btn btn-light btn-sm">–í—ã–π—Ç–∏</button>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2>–ó–∞–¥–∞—á–∏</h2>
        <button id="createTaskBtn" class="btn btn-success d-none" data-bs-toggle="modal" data-bs-target="#taskModal"
                onclick="openCreateModal()">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
        </button>
    </div>

    <div id="tasks-list" class="mt-3">
        <div class="list-group" id="taskContainer">
        </div>
    </div>
</div>

<template id="taskTemplate">
    <div class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1 task-title"></h5>
            <small class="text-muted task-status"></small>
            <div class="task-actions d-none">
                <button class="btn btn-sm btn-outline-primary me-2 d-none task-edit" onclick="editTask(this)">‚úèÔ∏è</button>
                <button class="btn btn-sm btn-outline-danger me-2 d-none task-del" onclick="deleteTask(this)">üóëÔ∏è</button>
                <button class="btn btn-sm btn-success d-none task-complete" onclick="completeTask(this)">‚úÖ</button>
            </div>
        </div>
        <p class="mb-1 task-description"></p>
        <small class="task-due"></small><br>
        <small class="text-muted">–°–æ–∑–¥–∞–Ω–æ: <span class="task-created-by"></span></small><br>
        <small class="text-muted">–ù–∞–∑–Ω–∞—á–µ–Ω–æ: <span class="task-assigned-to"></span></small>
        <div class="d-none task-id"></div>
    </div>
</template>

<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form id="taskForm" class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="taskModalLabel">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="taskId">
                <div class="mb-3">
                    <label for="taskTitle" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" class="form-control" id="taskTitle" required>
                </div>
                <div class="mb-3">
                    <label for="taskDescription" class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea class="form-control" id="taskDescription"></textarea>
                </div>
                <div class="mb-3">
                    <label for="taskDueDate" class="form-label">–°—Ä–æ–∫</label>
                    <input type="datetime-local" class="form-control" id="taskDueDate" required>
                </div>
                <div class="mb-3">
                    <label for="taskAssignedTo" class="form-label">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                    <select class="form-select" id="taskAssignedTo"></select>
                </div>
                <div class="mb-3 d-none" id="taskStatusGroup">
                    <label for="taskStatus" class="form-label">–°—Ç–∞—Ç—É—Å</label>
                    <select class="form-select" id="taskStatus">
                        <option value="PENDING">–í –æ–∂–∏–¥–∞–Ω–∏–∏</option>
                        <option value="IN_PROGRESS">–í —Ä–∞–±–æ—Ç–µ</option>
                        <option value="COMPLETED">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                        <option value="CANCELLED">–û—Ç–º–µ–Ω–µ–Ω–æ</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/auth.js"></script>
<script src="js/util.js"></script>
<script src="js/tasks.js"></script>
</body>
</html>
