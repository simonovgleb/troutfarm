<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/dashboard.html">–§–µ—Ä–º–∞</a>
        <div class="d-flex ms-auto">
            <button id="logoutBtn" class="btn btn-light btn-sm">–í—ã–π—Ç–∏</button>
        </div>
    </div>
</nav>

<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
        <button id="createUserBtn" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#userModal"
                onclick="openCreateUserModal()">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        </button>
    </div>

    <div class="list-group" id="userContainer"></div>
</div>


<template id="userTemplate">
    <li class="list-group-item d-flex justify-content-between align-items-start">
        <div>
            <h5 class="user-name mb-1"></h5>
            <span class="badge bg-secondary user-active"></span>
            <div><strong>Email:</strong> <span class="user-email"></span></div>
            <div><strong>–†–æ–ª–∏:</strong> <span class="user-roles"></span></div>
        </div>
        <span class="d-none user-id"></span>
        <div class="user-actions">
            <button class="btn btn-sm btn-outline-primary me-1" onclick="editUser(this)">‚úèÔ∏è</button>
            <button class="btn btn-sm btn-outline-danger" onclick="deleteUser(this)">üóëÔ∏è</button>
        </div>
    </li>
</template>

<div class="modal fade" id="userModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <form id="userForm" class="modal-content">
            <div class="modal-header">
                <h5 id="userModalLabel" class="modal-title"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="userId" />
                <div class="mb-3">
                    <label for="userName" class="form-label">–ò–º—è</label>
                    <input type="text" class="form-control" id="userName" required />
                </div>
                <div class="mb-3">
                    <label for="userEmail" class="form-label">–ü–æ—á—Ç–∞</label>
                    <input type="email" class="form-control" id="userEmail" required />
                </div>
                <div class="mb-3">
                    <label for="userPassword" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <div class="input-group">
                        <input type="password" class="form-control" id="userPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                            <i class="bi bi-eye" id="togglePasswordIcon"></i>
                        </button>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="userRoles" class="form-label">–†–æ–ª–∏</label>
                    <select id="userRoles" class="form-select" required>
                        <option value="ADMIN">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        <option value="OPERATOR">–û–ø–µ—Ä–∞—Ç–æ—Ä</option>
                    </select>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="userActive" checked>
                    <label class="form-check-label" for="userActive">
                        –ê–∫—Ç–∏–≤–µ–Ω
                    </label>
                </div>

            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>

<script src="js/auth.js"></script>
<script src="js/util.js"></script>
<script src="js/users.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
